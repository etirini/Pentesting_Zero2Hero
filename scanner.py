#!/bin/python3
import sys #CMD line arguments y mas 
import socket 
from datetime import datetime

#define target
#$python3	scanner.py 	<ip>
#		Argumento1	Argumento2

if len(sys.argv) == 2:
	target = socket.gethostbyname(sys.argv[1]) #traduce hostname a ipv4
else:
        print("Not enough arguments.")
        sys.exit()
print("-" * 50)
print("Scanning target "+target)
print("Time started "+str(datetime.now()))
print("-" * 50)

try:
        for port in range(50,85):
                s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
                                        #IPv4           #Port
                socket.setdefaulttimeout(1) #1 segundo, Podria usar float
                result = s.connect_ex((target,port)) #devuelve error indicator (0=connected, 1=error)
                print("Checking port {}".format(port))
                if result == 0:
                        print("Port {} is open".format(port))
                s.close()
                
except KeyboardInterrupt:
        print("\nExiting program")
        sys.exit()

except socket.gaierror:
        print("Hostname cannot be resolved")
        sys.exit()
        
except socket.error:
        print("Could not connect to server")
        sys.exit()

        
